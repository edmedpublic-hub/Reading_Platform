{% extends "base.html" %}
{% load static %}

{% block title %}Lesson Detail{% endblock %}

{% block content %}
<section class="container" data-lesson-id="{{ lesson.id }}">
  <h1 id="lessonTitle" class="mb-4">{{ lesson.title }}</h1>

  <!-- Lesson Text -->
  <div id="lessonText" class="lesson-text mb-4">
    {% if lesson.content %}
      {{ lesson.content|linebreaks }}
    {% else %}
      <p class="text-muted">No content available for this lesson.</p>
    {% endif %}
  </div>

  <!-- Voice Selection -->
  <div class="controls mb-3">
    <label for="voiceSelect" class="form-label">Choose Voice:</label>
    <select id="voiceSelect" class="form-select" aria-label="Voice selection"></select>
  </div>

  <!-- Text-to-Speech Controls -->
  <div class="controls btn-group mb-3" role="group" aria-label="Text-to-speech controls">
    <button id="readBtn" class="btn btn-primary">â–¶ Read</button>
    <button id="pauseBtn" class="btn btn-outline-primary">â¸ Pause</button>
    <button id="resumeBtn" class="btn btn-outline-primary">â¯ Resume</button>
    <button id="stopBtn" class="btn btn-danger">â¹ Stop</button>
  </div>

  <!-- Speech Recognition Controls -->
  <div class="student-controls btn-group mb-3" role="group" aria-label="Speech recognition controls">
    <button id="start-record-btn" class="btn btn-success">ğŸ™ Start Recording</button>
    <button id="stop-record-btn" class="btn btn-outline-success" disabled>ğŸ›‘ Stop Recording</button>
  </div>

  <!-- Feedback Section -->
  <div class="controls mb-3">
    <button id="get-feedback-btn" class="btn btn-warning">ğŸ’¡ Get Feedback</button>
    <div id="feedbackBox" class="feedback-box mt-3 p-3 border rounded">
      Feedback will appear here.
    </div>
  </div>

  <a href="{% url 'reading:home' %}" class="btn btn-link">â† Back to Lessons</a>
</section>
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'reading/reading.css' %}">
{% endblock %}

{% block extra_js %}
<script type="module" src="{% static 'reading/reading.main.js' %}"></script>
{% endblock %}
