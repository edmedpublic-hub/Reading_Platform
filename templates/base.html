{% load static %}
<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}Reading Platform{% endblock %}</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />

    <style>
      body { transition: background-color 0.25s ease, color 0.25s ease; }
      .app-brand { font-weight: 700; letter-spacing: 0.5px; }
      [data-bs-theme="light"] body { background-color: #f8fafc; }
      [data-bs-theme="dark"] body { background-color: #0f172a; color: #e5e7eb; }
    </style>
    {% block extra_css %}{% endblock %}
  </head>

  <body class="d-flex flex-column min-vh-100">

    <nav class="navbar navbar-expand-lg navbar-dark bg-primary mb-4">
      <div class="container">
        <a class="navbar-brand app-brand" href="/">Reading Platform</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navContent">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navContent">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item"><a class="nav-link" href="/">Library</a></li>
            <li class="nav-item"><a class="nav-link" href="#">Progress</a></li>
            <li class="nav-item ms-3">
              <button id="theme-toggle" class="btn btn-outline-light btn-sm" type="button">Dark Mode</button>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <main class="container mb-5 flex-grow-1">
      {% block content %}{% endblock %}
    </main>

    <footer class="py-3 mt-auto text-center border-top">
      <small class="text-muted">&copy; {% now "Y" %} Reading Platform Portfolio Project</small>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      (function () {
        const root = document.documentElement;
        const toggleBtn = document.getElementById("theme-toggle");
        const saved = localStorage.getItem("theme");
        if (saved === "dark") { root.setAttribute("data-bs-theme", "dark"); toggleBtn.textContent = "Light Mode"; }
        toggleBtn.addEventListener("click", function () {
            const current = root.getAttribute("data-bs-theme");
            const next = current === "dark" ? "light" : "dark";
            root.setAttribute("data-bs-theme", next);
            localStorage.setItem("theme", next);
            toggleBtn.textContent = next === "dark" ? "Light Mode" : "Dark Mode";
        });
      })();
    </script>
    {% block extra_js %}{% endblock %}
  </body>
</html>